# Caminho do arquivo com a lista de servidores
$serversList = "C:\temp\servers.txt"

# Ler a lista de servidores
$servers = Get-Content -Path $serversList

# Loop para reiniciar cada servidor
foreach ($server in $servers) {
    try {
        Write-Host "Reiniciando o servidor: $server"
        Restart-Computer -ComputerName $server -Force -ErrorAction Stop
        Write-Host "Servidor $server reiniciado com sucesso."
    } catch {
        Write-Host "Falha ao reiniciar o servidor: $server. Erro: $_"
    }
}
